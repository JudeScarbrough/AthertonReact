{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getUserData,setData}from\"../../database/database\";import\"../../cssFiles/am.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function AppointmentManager(props){const[userData,setUserData]=useState(props.userData);const[topText,setTopText]=useState('');const[includeFirstName,setIncludeFirstName]=useState(false);const[includeLastName,setIncludeLastName]=useState(false);const[mainText,setMainText]=useState('');const[minutesDelay,setMinutesDelay]=useState(60);const[refreshKey,setRefreshKey]=useState(0);const[showOverlay,setShowOverlay]=useState(false);// State for the overlay\nuseEffect(()=>{getUserData().then(fetchedData=>{if(JSON.stringify(fetchedData)!==JSON.stringify(userData)){setUserData(fetchedData);}});},[refreshKey]);useEffect(()=>{if(userData.appointmentData){const{firstText,firstName,lastName,secondText,minutesDelay}=userData.appointmentData;setTopText(firstText);setIncludeFirstName(firstName);setIncludeLastName(lastName);setMainText(secondText);setMinutesDelay(minutesDelay);}else{let companyName=userData.settings[0];setTopText(\"Hello \");setIncludeFirstName(true);setMainText(\", thank you for visiting \".concat(companyName,\". We hope to see you again soon! If you had a great time, please consider leaving us a Google review. LinkToYourGoogleReviewPage.com\"));setMinutesDelay(60);}},[userData]);const handleConfirm=()=>{const updatedUserData={...userData,appointmentData:{firstText:topText,firstName:includeFirstName,lastName:includeLastName,secondText:mainText,minutesDelay:minutesDelay}};setUserData(updatedUserData);setData(updatedUserData);setShowOverlay(true);// Show the overlay\nsetTimeout(()=>setShowOverlay(false),5000);// Hide the overlay after 5 seconds\n};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"amAll\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"amTitle\",children:\"Post-Appointment Message\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"AMmessageBlock\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Text Message\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"templateSelect\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Include: \"}),/*#__PURE__*/_jsx(\"div\",{className:\"templateOpt \".concat(includeFirstName?'templateOptSelected':''),onClick:()=>setIncludeFirstName(!includeFirstName),children:\"Customer's First Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"templateOpt \".concat(includeLastName?'templateOptSelected':''),onClick:()=>setIncludeLastName(!includeLastName),children:\"Customer's Last Name\"})]}),includeFirstName||includeLastName?/*#__PURE__*/_jsx(\"textarea\",{id:\"amSmallText\",value:topText,onChange:e=>setTopText(e.target.value)}):null,/*#__PURE__*/_jsxs(\"div\",{id:\"templateSelect\",children:[includeFirstName&&/*#__PURE__*/_jsx(\"div\",{className:\"selectedOpt\",children:\"First Name\"}),includeLastName&&/*#__PURE__*/_jsx(\"div\",{className:\"selectedOpt\",children:\"Last Name\"})]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"amMainText\",value:mainText,onChange:e=>setMainText(e.target.value)}),/*#__PURE__*/_jsx(\"h2\",{id:\"amPreviewTitle\",children:\"Preview Text:\"}),/*#__PURE__*/_jsxs(\"h2\",{id:\"amPreview\",children:[/*#__PURE__*/_jsx(\"span\",{children:topText}),includeFirstName&&/*#__PURE__*/_jsx(\"span\",{className:\"previewName1\",children:\"First Name\"}),includeLastName&&/*#__PURE__*/_jsx(\"span\",{className:\"previewName2\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"span\",{children:mainText})]}),/*#__PURE__*/_jsxs(\"h1\",{id:\"bottomText\",children:[\"Schedule text message to be sent\",/*#__PURE__*/_jsx(\"input\",{id:\"bottomInput\",type:\"number\",min:\"0\",value:minutesDelay,onChange:e=>setMinutesDelay(parseInt(e.target.value))}),\"minutes after the appointment begins for all customers.\"]}),/*#__PURE__*/_jsx(\"div\",{id:\"AMConfirmButton\",onClick:handleConfirm,children:\"Confirm\"})]})]}),showOverlay&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overlay-content\",children:\"Settings Saved Successfully\"})})]});}","map":{"version":3,"names":["React","useState","useEffect","getUserData","setData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AppointmentManager","props","userData","setUserData","topText","setTopText","includeFirstName","setIncludeFirstName","includeLastName","setIncludeLastName","mainText","setMainText","minutesDelay","setMinutesDelay","refreshKey","setRefreshKey","showOverlay","setShowOverlay","then","fetchedData","JSON","stringify","appointmentData","firstText","firstName","lastName","secondText","companyName","settings","concat","handleConfirm","updatedUserData","setTimeout","children","id","className","onClick","value","onChange","e","target","type","min","parseInt"],"sources":["D:/development/AthertonReact/ReactFiles/src/dashboard/subApps/am.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getUserData, setData } from \"../../database/database\";\r\nimport \"../../cssFiles/am.css\";\r\n\r\nexport function AppointmentManager(props) {\r\n    const [userData, setUserData] = useState(props.userData);\r\n    const [topText, setTopText] = useState('');\r\n    const [includeFirstName, setIncludeFirstName] = useState(false);\r\n    const [includeLastName, setIncludeLastName] = useState(false);\r\n    const [mainText, setMainText] = useState('');\r\n    const [minutesDelay, setMinutesDelay] = useState(60);\r\n    const [refreshKey, setRefreshKey] = useState(0);\r\n    const [showOverlay, setShowOverlay] = useState(false);  // State for the overlay\r\n\r\n    useEffect(() => {\r\n        getUserData().then(fetchedData => {\r\n            if (JSON.stringify(fetchedData) !== JSON.stringify(userData)) {\r\n                setUserData(fetchedData);\r\n            }\r\n        });\r\n    }, [refreshKey]);\r\n\r\n    useEffect(() => {\r\n        if (userData.appointmentData) {\r\n            const { firstText, firstName, lastName, secondText, minutesDelay } = userData.appointmentData;\r\n            setTopText(firstText);\r\n            setIncludeFirstName(firstName);\r\n            setIncludeLastName(lastName);\r\n            setMainText(secondText);\r\n            setMinutesDelay(minutesDelay);\r\n        } else {\r\n            let companyName = userData.settings[0];\r\n            setTopText(\"Hello \");\r\n            setIncludeFirstName(true);\r\n            setMainText(`, thank you for visiting ${companyName}. We hope to see you again soon! If you had a great time, please consider leaving us a Google review. LinkToYourGoogleReviewPage.com`);\r\n            setMinutesDelay(60);\r\n        }\r\n    }, [userData]);\r\n\r\n    const handleConfirm = () => {\r\n        const updatedUserData = {\r\n            ...userData,\r\n            appointmentData: {\r\n                firstText: topText,\r\n                firstName: includeFirstName,\r\n                lastName: includeLastName,\r\n                secondText: mainText,\r\n                minutesDelay: minutesDelay\r\n            }\r\n        };\r\n        setUserData(updatedUserData);\r\n        setData(updatedUserData);\r\n\r\n        setShowOverlay(true);  // Show the overlay\r\n        setTimeout(() => setShowOverlay(false), 5000);  // Hide the overlay after 5 seconds\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div id=\"amAll\">\r\n                <h1 id=\"amTitle\">Post-Appointment Message</h1>\r\n                <div id=\"AMmessageBlock\">\r\n                    <h3>Text Message</h3>\r\n                    <div id=\"templateSelect\">\r\n                        <h3>Include: </h3>\r\n                        <div \r\n                            className={`templateOpt ${includeFirstName ? 'templateOptSelected' : ''}`} \r\n                            onClick={() => setIncludeFirstName(!includeFirstName)}\r\n                        >\r\n                            Customer's First Name\r\n                        </div>\r\n                        <div \r\n                            className={`templateOpt ${includeLastName ? 'templateOptSelected' : ''}`} \r\n                            onClick={() => setIncludeLastName(!includeLastName)}\r\n                        >\r\n                            Customer's Last Name\r\n                        </div>\r\n                    </div>\r\n\r\n                    {includeFirstName || includeLastName ? (\r\n                        <textarea\r\n                            id=\"amSmallText\"\r\n                            value={topText}\r\n                            onChange={e => setTopText(e.target.value)}\r\n                        ></textarea>\r\n                    ) : null}\r\n\r\n                    <div id=\"templateSelect\">\r\n                    {includeFirstName && <div className=\"selectedOpt\">First Name</div>}\r\n                    {includeLastName && <div className=\"selectedOpt\">Last Name</div>}\r\n                    </div>\r\n\r\n                    <textarea\r\n                        id=\"amMainText\"\r\n                        value={mainText}\r\n                        onChange={e => setMainText(e.target.value)}\r\n                    ></textarea>\r\n\r\n                    <h2 id=\"amPreviewTitle\">Preview Text:</h2>\r\n                    <h2 id=\"amPreview\">\r\n                        <span>{topText}</span>\r\n                        {includeFirstName && <span className=\"previewName1\">First Name</span>}\r\n                        {includeLastName && <span className=\"previewName2\">Last Name</span>}\r\n                        <span>{mainText}</span>\r\n                    </h2>\r\n\r\n                    <h1 id=\"bottomText\">\r\n                        Schedule text message to be sent \r\n                        <input \r\n                            id=\"bottomInput\" \r\n                            type=\"number\" \r\n                            min=\"0\" \r\n                            value={minutesDelay} \r\n                            onChange={e => setMinutesDelay(parseInt(e.target.value))}\r\n                        /> \r\n                        minutes after the appointment begins for all customers.\r\n                    </h1>\r\n\r\n                    <div id=\"AMConfirmButton\" onClick={handleConfirm}>Confirm</div>\r\n                </div>\r\n            </div>\r\n            {showOverlay && (\r\n                <div className=\"overlay\">\r\n                    <div className=\"overlay-content\">Settings Saved Successfully</div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}