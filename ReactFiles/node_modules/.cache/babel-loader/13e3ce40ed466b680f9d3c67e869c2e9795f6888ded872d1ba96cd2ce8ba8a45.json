{"ast":null,"code":"import{initializeApp}from'firebase/app';import{getAuth}from'firebase/auth';import{getDatabase,ref,set,get,update}from'firebase/database';import'../firebase.js';// Import your Firebase configuration\n// Initialize Firebase Authentication and Database\nconst auth=getAuth();const database=getDatabase();// Function to create a user spot in the database\nfunction createUserSpot(userData){const userId=auth.currentUser.uid;// Get the current user's ID\nset(ref(database,'users/'+userId),userData).then(()=>console.log(\"User data saved successfully.\")).catch(error=>console.error(\"Error saving user data:\",error));}// Function to get or create user data from the database\nexport function getUserData(){return new Promise((resolve,reject)=>{var _auth$currentUser;const userId=(_auth$currentUser=auth.currentUser)===null||_auth$currentUser===void 0?void 0:_auth$currentUser.uid;// Safely get the current user's ID if logged in\nif(!userId){console.error(\"No user is signed in.\");reject(\"No user is signed in.\");// Reject the promise if no user is signed in\nreturn;}const userRef=ref(database,'users/'+userId);get(userRef).then(snapshot=>{if(snapshot.exists()){console.log(\"Data retrieved\");resolve(snapshot.val());// Resolve the promise with the retrieved data\n}else{var startingUserData={paid:\"No\",setup:\"No\"};createUserSpot(startingUserData);console.log(\"Data created\");resolve(startingUserData);// Resolve the promise with the new data\n}}).catch(error=>{console.error(\"Error fetching user data:\",error);reject(error);// Reject the promise if there is an error fetching the data\n});});}// Function to set or update data for the current user\nexport function setData(userData){var _auth$currentUser2;const userId=(_auth$currentUser2=auth.currentUser)===null||_auth$currentUser2===void 0?void 0:_auth$currentUser2.uid;// Safely get the current user's ID if logged in\nif(!userId){console.error(\"No user is signed in.\");return;// Exit if no user is signed in\n}const userRef=ref(database,'users/'+userId);update(userRef,userData).then(()=>console.log(\"User data updated successfully.\")).catch(error=>console.error(\"Error updating user data:\",error));}","map":{"version":3,"names":["initializeApp","getAuth","getDatabase","ref","set","get","update","auth","database","createUserSpot","userData","userId","currentUser","uid","then","console","log","catch","error","getUserData","Promise","resolve","reject","_auth$currentUser","userRef","snapshot","exists","val","startingUserData","paid","setup","setData","_auth$currentUser2"],"sources":["/Users/jscarbrough/Desktop/AthertonReact/src/database/database.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getDatabase, ref, set, get, update } from 'firebase/database';\nimport '../firebase.js'; // Import your Firebase configuration\n\n// Initialize Firebase Authentication and Database\nconst auth = getAuth();\nconst database = getDatabase();\n\n// Function to create a user spot in the database\nfunction createUserSpot(userData) {\n    const userId = auth.currentUser.uid; // Get the current user's ID\n    set(ref(database, 'users/' + userId), userData)\n        .then(() => console.log(\"User data saved successfully.\"))\n        .catch((error) => console.error(\"Error saving user data:\", error));\n}\n\n// Function to get or create user data from the database\nexport function getUserData() {\n    return new Promise((resolve, reject) => {\n        const userId = auth.currentUser?.uid; // Safely get the current user's ID if logged in\n        if (!userId) {\n            console.error(\"No user is signed in.\");\n            reject(\"No user is signed in.\"); // Reject the promise if no user is signed in\n            return;\n        }\n\n        const userRef = ref(database, 'users/' + userId);\n        get(userRef).then((snapshot) => {\n            if (snapshot.exists()) {\n                console.log(\"Data retrieved\");\n                resolve(snapshot.val()); // Resolve the promise with the retrieved data\n            } else {\n                var startingUserData = { paid: \"No\", setup: \"No\" };\n                createUserSpot(startingUserData);\n                console.log(\"Data created\");\n                resolve(startingUserData); // Resolve the promise with the new data\n            }\n        }).catch((error) => {\n            console.error(\"Error fetching user data:\", error);\n            reject(error); // Reject the promise if there is an error fetching the data\n        });\n    });\n}\n\n// Function to set or update data for the current user\nexport function setData(userData) {\n    const userId = auth.currentUser?.uid; // Safely get the current user's ID if logged in\n    if (!userId) {\n        console.error(\"No user is signed in.\");\n        return; // Exit if no user is signed in\n    }\n\n    const userRef = ref(database, 'users/' + userId);\n    update(userRef, userData)\n        .then(() => console.log(\"User data updated successfully.\"))\n        .catch((error) => console.error(\"Error updating user data:\", error));\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}