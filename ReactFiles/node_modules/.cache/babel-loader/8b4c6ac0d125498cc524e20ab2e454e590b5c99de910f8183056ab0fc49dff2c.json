{"ast":null,"code":"import\"../../cssFiles/dm.css\";import React,{useState,useEffect}from'react';import{getUserData}from\"../../database/database\";import{getServerIp}from\"../../config\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export function DirectMessage(props){const[userData,setUserData]=useState(props.userData);const[refreshKey,setRefreshKey]=useState(0);// State to trigger useEffect\nuseEffect(()=>{// Fetch the latest user data\ngetUserData().then(fetchedData=>{// Check if the fetched data is different from the current state\nif(JSON.stringify(fetchedData)!==JSON.stringify(userData)){// Update state if the data is different\nsetUserData(fetchedData);}});},[refreshKey]);// Depend on refreshKey to re-fetch user data\nconst[showGroupPopup,setShowGroupPopup]=useState(false);const[selectedGroupIndexes,setSelectedGroupIndexes]=useState([]);const handleGroupChange=index=>{setSelectedGroupIndexes(prev=>prev.includes(index)?prev.filter(i=>i!==index):[...prev,index]);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"dmAll\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"dmTitle\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"messageBlock\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Group Message\"}),/*#__PURE__*/_jsx(\"textarea\",{}),/*#__PURE__*/_jsx(GroupSection,{userData:userData,selectedGroupIndexes:selectedGroupIndexes,setShowGroupPopup:setShowGroupPopup,handleGroupChange:handleGroupChange}),showGroupPopup&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\"}),renderGroupPopup(userData,selectedGroupIndexes,setShowGroupPopup,handleGroupChange)]}),/*#__PURE__*/_jsxs(\"div\",{id:\"groupSection\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"sendButton\",children:\"Send Text To Slected Groups\"}),/*#__PURE__*/_jsx(\"h4\",{id:\"dmInfo\",children:\"Texts are sent to each member of each group individually\"})]})]})]})});}function renderGroupPopup(userData,selectedGroupIndexes,setShowGroupPopup,handleGroupChange){return/*#__PURE__*/_jsxs(\"div\",{className:\"group-popup\",children:[userData.groupData.map((groupName,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"group-\".concat(index),checked:selectedGroupIndexes.includes(index),onChange:()=>handleGroupChange(index),className:\"popupCheckbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"group-\".concat(index),className:\"checkboxLabel\",children:groupName})]},index)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowGroupPopup(false),children:\"Done\"})]});}function GroupSection(_ref){let{userData,selectedGroupIndexes,setShowGroupPopup,handleGroupChange}=_ref;return/*#__PURE__*/_jsxs(\"div\",{id:\"groupSection\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"groupSelector\",onClick:()=>setShowGroupPopup(true),children:selectedGroupIndexes.length>0?'Edit Groups':'Select Groups'}),selectedGroupIndexes.map(groupIndex=>/*#__PURE__*/_jsx(\"div\",{className:\"groupblock\",children:userData.groupData&&userData.groupData[groupIndex]?userData.groupData[groupIndex]:\"Invalid group \".concat(groupIndex)},groupIndex))]});}","map":{"version":3,"names":["React","useState","useEffect","getUserData","getServerIp","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DirectMessage","props","userData","setUserData","refreshKey","setRefreshKey","then","fetchedData","JSON","stringify","showGroupPopup","setShowGroupPopup","selectedGroupIndexes","setSelectedGroupIndexes","handleGroupChange","index","prev","includes","filter","i","children","id","GroupSection","className","renderGroupPopup","groupData","map","groupName","type","concat","checked","onChange","htmlFor","onClick","_ref","length","groupIndex"],"sources":["D:/development/AthertonReact/ReactFiles/src/dashboard/subApps/dm.js"],"sourcesContent":["import \"../../cssFiles/dm.css\"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { getUserData } from \"../../database/database\";\r\nimport { getServerIp } from \"../../config\";\r\n\r\n\r\nexport function DirectMessage(props){\r\n\r\n    const [userData, setUserData] = useState(props.userData);\r\n    const [refreshKey, setRefreshKey] = useState(0); // State to trigger useEffect\r\n\r\n    useEffect(() => {\r\n        // Fetch the latest user data\r\n        getUserData().then(fetchedData => {\r\n            // Check if the fetched data is different from the current state\r\n            if (JSON.stringify(fetchedData) !== JSON.stringify(userData)) {\r\n                // Update state if the data is different\r\n                setUserData(fetchedData);\r\n            }\r\n        });\r\n    }, [refreshKey]); // Depend on refreshKey to re-fetch user data\r\n\r\n\r\n\r\n    const [showGroupPopup, setShowGroupPopup] = useState(false);\r\n    const [selectedGroupIndexes, setSelectedGroupIndexes] = useState([]);\r\n    const handleGroupChange = (index) => {\r\n        setSelectedGroupIndexes(prev => prev.includes(index) ? prev.filter(i => i !== index) : [...prev, index]);\r\n    };\r\n\r\n\r\n    return (<>\r\n    <div id=\"dmAll\">\r\n\r\n        <h1 id=\"dmTitle\"></h1>\r\n        \r\n        <div id=\"messageBlock\">\r\n            <h3>Group Message</h3>\r\n\r\n            <textarea></textarea>\r\n\r\n\r\n            <GroupSection\r\n                userData={userData}\r\n                selectedGroupIndexes={selectedGroupIndexes}\r\n                setShowGroupPopup={setShowGroupPopup}\r\n                handleGroupChange={handleGroupChange}\r\n            />\r\n            {showGroupPopup && (\r\n                <>\r\n                    <div className=\"modal-overlay\"></div>\r\n                    {renderGroupPopup(userData, selectedGroupIndexes, setShowGroupPopup, handleGroupChange)}\r\n                </>\r\n            )}\r\n\r\n            <div id=\"groupSection\">\r\n                <div id=\"sendButton\" >Send Text To Slected Groups</div>\r\n                <h4 id=\"dmInfo\">Texts are sent to each member of each group individually</h4>\r\n\r\n\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n\r\n    </div>\r\n    </>)\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction renderGroupPopup(userData, selectedGroupIndexes, setShowGroupPopup, handleGroupChange) {\r\n    return (\r\n        <div className=\"group-popup\">\r\n            {userData.groupData.map((groupName, index) => (\r\n                <div key={index}>\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        id={`group-${index}`}\r\n                        checked={selectedGroupIndexes.includes(index)}\r\n                        onChange={() => handleGroupChange(index)}\r\n                        className='popupCheckbox'\r\n                    />\r\n                    <label htmlFor={`group-${index}`} className='checkboxLabel'>{groupName}</label>\r\n                </div>\r\n            ))}\r\n            <button onClick={() => setShowGroupPopup(false)}>Done</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction GroupSection({ userData, selectedGroupIndexes, setShowGroupPopup, handleGroupChange }) {\r\n    return (\r\n        <div id=\"groupSection\">\r\n            <div className=\"groupSelector\" onClick={() => setShowGroupPopup(true)}>\r\n                {selectedGroupIndexes.length > 0 ? 'Edit Groups' : 'Select Groups'}\r\n            </div>\r\n            {selectedGroupIndexes.map(groupIndex => (\r\n                <div className=\"groupblock\" key={groupIndex}>\r\n                    {userData.groupData && userData.groupData[groupIndex]\r\n                        ? userData.groupData[groupIndex]\r\n                        : `Invalid group ${groupIndex}`}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}