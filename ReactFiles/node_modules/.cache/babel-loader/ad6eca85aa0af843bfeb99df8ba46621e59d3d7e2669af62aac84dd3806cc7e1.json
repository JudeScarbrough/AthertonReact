{"ast":null,"code":"import\"../../cssFiles/dm.css\";import React,{useState,useEffect}from'react';import{getUserData}from\"../../database/database\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function DirectMessage(props){const[userData,setUserData]=useState(props.userData);const[refreshKey,setRefreshKey]=useState(0);// State to trigger useEffect\nuseEffect(()=>{// Fetch the latest user data\ngetUserData().then(fetchedData=>{// Check if the fetched data is different from the current state\nif(JSON.stringify(fetchedData)!==JSON.stringify(userData)){// Update state if the data is different\nsetUserData(fetchedData);}});},[refreshKey]);// Depend on refreshKey to re-fetch user data\nconst[showGroupPopup,setShowGroupPopup]=useState(false);const[selectedGroupIndexes,setSelectedGroupIndexes]=useState([]);const handleGroupChange=index=>{setSelectedGroupIndexes(prev=>prev.includes(index)?prev.filter(i=>i!==index):[...prev,index]);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"dmAll\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"dmTitle\",children:\"Instant Message\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"messageBlock\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Text Message\"}),/*#__PURE__*/_jsx(\"textarea\",{}),/*#__PURE__*/_jsx(GroupSection,{userData:userData,selectedGroupIndexes:selectedGroupIndexes,setShowGroupPopup:setShowGroupPopup,handleGroupChange:handleGroupChange}),showGroupPopup&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\"}),renderGroupPopup(userData,selectedGroupIndexes,setShowGroupPopup,handleGroupChange)]}),/*#__PURE__*/_jsx(\"div\",{id:\"groupSection\",children:/*#__PURE__*/_jsx(\"div\",{id:\"sendButton\",children:\"Send Text To Slected Groups\"})})]})]})});}function renderGroupPopup(userData,selectedGroupIndexes,setShowGroupPopup,handleGroupChange){return/*#__PURE__*/_jsxs(\"div\",{className:\"group-popup\",children:[userData.groupData.map((groupName,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"group-\".concat(index),checked:selectedGroupIndexes.includes(index),onChange:()=>handleGroupChange(index),className:\"popupCheckbox\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"group-\".concat(index),className:\"checkboxLabel\",children:groupName})]},index)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowGroupPopup(false),children:\"Done\"})]});}function GroupSection(_ref){let{userData,selectedGroupIndexes,setShowGroupPopup,handleGroupChange}=_ref;return/*#__PURE__*/_jsxs(\"div\",{id:\"groupSection\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"groupSelector\",onClick:()=>setShowGroupPopup(true),children:selectedGroupIndexes.length>0?'Edit Groups':'Select Groups'}),selectedGroupIndexes.map(groupIndex=>/*#__PURE__*/_jsx(\"div\",{className:\"groupblock\",children:userData.groupData&&userData.groupData[groupIndex]?userData.groupData[groupIndex]:\"Invalid group \".concat(groupIndex)},groupIndex))]});}","map":{"version":3,"names":["React","useState","useEffect","getUserData","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DirectMessage","props","userData","setUserData","refreshKey","setRefreshKey","then","fetchedData","JSON","stringify","showGroupPopup","setShowGroupPopup","selectedGroupIndexes","setSelectedGroupIndexes","handleGroupChange","index","prev","includes","filter","i","children","id","GroupSection","className","renderGroupPopup","groupData","map","groupName","type","concat","checked","onChange","htmlFor","onClick","_ref","length","groupIndex"],"sources":["/Users/jscarbrough/Desktop/AthertonReact/src/dashboard/subApps/dm.js"],"sourcesContent":["import \"../../cssFiles/dm.css\"\nimport React, { useState, useEffect } from 'react';\nimport { getUserData } from \"../../database/database\";\n\n\nexport function DirectMessage(props){\n\n    const [userData, setUserData] = useState(props.userData);\n    const [refreshKey, setRefreshKey] = useState(0); // State to trigger useEffect\n\n    useEffect(() => {\n        // Fetch the latest user data\n        getUserData().then(fetchedData => {\n            // Check if the fetched data is different from the current state\n            if (JSON.stringify(fetchedData) !== JSON.stringify(userData)) {\n                // Update state if the data is different\n                setUserData(fetchedData);\n            }\n        });\n    }, [refreshKey]); // Depend on refreshKey to re-fetch user data\n\n\n\n    const [showGroupPopup, setShowGroupPopup] = useState(false);\n    const [selectedGroupIndexes, setSelectedGroupIndexes] = useState([]);\n    const handleGroupChange = (index) => {\n        setSelectedGroupIndexes(prev => prev.includes(index) ? prev.filter(i => i !== index) : [...prev, index]);\n    };\n\n\n    return (<>\n    <div id=\"dmAll\">\n\n        <h1 id=\"dmTitle\">Instant Message</h1>\n        \n        <div id=\"messageBlock\">\n            <h3>Text Message</h3>\n\n            <textarea></textarea>\n\n\n            <GroupSection\n                userData={userData}\n                selectedGroupIndexes={selectedGroupIndexes}\n                setShowGroupPopup={setShowGroupPopup}\n                handleGroupChange={handleGroupChange}\n            />\n            {showGroupPopup && (\n                <>\n                    <div className=\"modal-overlay\"></div>\n                    {renderGroupPopup(userData, selectedGroupIndexes, setShowGroupPopup, handleGroupChange)}\n                </>\n            )}\n\n            <div id=\"groupSection\">\n                <div id=\"sendButton\">Send Text To Slected Groups</div>\n\n\n            </div>\n\n\n        </div>\n\n\n    </div>\n    </>)\n}\n\n\n\n\n\nfunction renderGroupPopup(userData, selectedGroupIndexes, setShowGroupPopup, handleGroupChange) {\n    return (\n        <div className=\"group-popup\">\n            {userData.groupData.map((groupName, index) => (\n                <div key={index}>\n                    <input\n                        type=\"checkbox\"\n                        id={`group-${index}`}\n                        checked={selectedGroupIndexes.includes(index)}\n                        onChange={() => handleGroupChange(index)}\n                        className='popupCheckbox'\n                    />\n                    <label htmlFor={`group-${index}`} className='checkboxLabel'>{groupName}</label>\n                </div>\n            ))}\n            <button onClick={() => setShowGroupPopup(false)}>Done</button>\n        </div>\n    );\n}\n\nfunction GroupSection({ userData, selectedGroupIndexes, setShowGroupPopup, handleGroupChange }) {\n    return (\n        <div id=\"groupSection\">\n            <div className=\"groupSelector\" onClick={() => setShowGroupPopup(true)}>\n                {selectedGroupIndexes.length > 0 ? 'Edit Groups' : 'Select Groups'}\n            </div>\n            {selectedGroupIndexes.map(groupIndex => (\n                <div className=\"groupblock\" key={groupIndex}>\n                    {userData.groupData && userData.groupData[groupIndex]\n                        ? userData.groupData[groupIndex]\n                        : `Invalid group ${groupIndex}`}\n                </div>\n            ))}\n        </div>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}