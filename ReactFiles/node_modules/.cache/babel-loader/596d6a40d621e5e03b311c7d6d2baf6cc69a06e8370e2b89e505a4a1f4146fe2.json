{"ast":null,"code":"import React,{useState,useEffect}from'react';import\"../../../cssFiles/cm.css\";import{UserBlock}from'./userBlock/userBlock.js';import{AddUser}from'./addUser.js';import{getUserData,setData}from'../../../database/database.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function ClientManager(props){const[userData,setUserData]=useState(props.userData);const[refreshKey,setRefreshKey]=useState(0);// State to trigger useEffect\nconst[forceClose,setForceClose]=useState(false);useEffect(()=>{// Fetch the latest user data\ngetUserData().then(fetchedData=>{// Check if the fetched data is different from the current state\nif(JSON.stringify(fetchedData)!==JSON.stringify(userData)){// Update state if the data is different\nsetUserData(fetchedData);}});},[refreshKey]);// Depend on refreshKey to re-fetch user data\nconst updateUserData=newUserData=>{setUserData(newUserData);// Update the state\nsetData(newUserData);// Call setData to update the database\nsetRefreshKey(prevKey=>prevKey+1);// Increment refreshKey to trigger useEffect\n};const forceCloseEdit=()=>{setForceClose(!forceClose);};return/*#__PURE__*/_jsxs(\"div\",{id:\"cmAll\",children:[/*#__PURE__*/_jsx(AddUser,{userData:userData,updateUserData:updateUserData,forceCloseEdit:forceCloseEdit}),/*#__PURE__*/_jsx(UserBlock,{userData:userData,updateUserData:updateUserData,forceCloseEdit:forceCloseEdit,forceClose:forceClose})]});}","map":{"version":3,"names":["React","useState","useEffect","UserBlock","AddUser","getUserData","setData","jsx","_jsx","jsxs","_jsxs","ClientManager","props","userData","setUserData","refreshKey","setRefreshKey","forceClose","setForceClose","then","fetchedData","JSON","stringify","updateUserData","newUserData","prevKey","forceCloseEdit","id","children"],"sources":["D:/development/AthertonReact/ReactFiles/src/dashboard/subApps/cm/cm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport \"../../../cssFiles/cm.css\";\r\nimport { UserBlock } from './userBlock/userBlock.js';\r\nimport { AddUser } from './addUser.js';\r\nimport { getUserData, setData } from '../../../database/database.js';\r\n\r\nexport function ClientManager(props) {\r\n    const [userData, setUserData] = useState(props.userData);\r\n    const [refreshKey, setRefreshKey] = useState(0); // State to trigger useEffect\r\n    const [forceClose, setForceClose] = useState(false)\r\n\r\n    useEffect(() => {\r\n        // Fetch the latest user data\r\n        getUserData().then(fetchedData => {\r\n            // Check if the fetched data is different from the current state\r\n            if (JSON.stringify(fetchedData) !== JSON.stringify(userData)) {\r\n                // Update state if the data is different\r\n                setUserData(fetchedData);\r\n            }\r\n        });\r\n    }, [refreshKey]); // Depend on refreshKey to re-fetch user data\r\n\r\n    const updateUserData = (newUserData) => {\r\n        setUserData(newUserData); // Update the state\r\n        setData(newUserData); // Call setData to update the database\r\n        setRefreshKey(prevKey => prevKey + 1); // Increment refreshKey to trigger useEffect\r\n    };\r\n\r\n\r\n\r\n    const forceCloseEdit = () => {\r\n        setForceClose(!forceClose)\r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div id=\"cmAll\">\r\n            <AddUser userData={userData} updateUserData={updateUserData} forceCloseEdit={forceCloseEdit}/>\r\n            <UserBlock userData={userData} updateUserData={updateUserData} forceCloseEdit={forceCloseEdit} forceClose={forceClose}/>\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,0BAA0B,CACjC,OAASC,SAAS,KAAQ,0BAA0B,CACpD,OAASC,OAAO,KAAQ,cAAc,CACtC,OAASC,WAAW,CAAEC,OAAO,KAAQ,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErE,MAAO,SAAS,CAAAC,aAAaA,CAACC,KAAK,CAAE,CACjC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAACW,KAAK,CAACC,QAAQ,CAAC,CACxD,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CAAE;AACjD,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAEnDC,SAAS,CAAC,IAAM,CACZ;AACAG,WAAW,CAAC,CAAC,CAACc,IAAI,CAACC,WAAW,EAAI,CAC9B;AACA,GAAIC,IAAI,CAACC,SAAS,CAACF,WAAW,CAAC,GAAKC,IAAI,CAACC,SAAS,CAACT,QAAQ,CAAC,CAAE,CAC1D;AACAC,WAAW,CAACM,WAAW,CAAC,CAC5B,CACJ,CAAC,CAAC,CACN,CAAC,CAAE,CAACL,UAAU,CAAC,CAAC,CAAE;AAElB,KAAM,CAAAQ,cAAc,CAAIC,WAAW,EAAK,CACpCV,WAAW,CAACU,WAAW,CAAC,CAAE;AAC1BlB,OAAO,CAACkB,WAAW,CAAC,CAAE;AACtBR,aAAa,CAACS,OAAO,EAAIA,OAAO,CAAG,CAAC,CAAC,CAAE;AAC3C,CAAC,CAID,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzBR,aAAa,CAAC,CAACD,UAAU,CAAC,CAC9B,CAAC,CAKD,mBACIP,KAAA,QAAKiB,EAAE,CAAC,OAAO,CAAAC,QAAA,eACXpB,IAAA,CAACJ,OAAO,EAACS,QAAQ,CAAEA,QAAS,CAACU,cAAc,CAAEA,cAAe,CAACG,cAAc,CAAEA,cAAe,CAAC,CAAC,cAC9FlB,IAAA,CAACL,SAAS,EAACU,QAAQ,CAAEA,QAAS,CAACU,cAAc,CAAEA,cAAe,CAACG,cAAc,CAAEA,cAAe,CAACT,UAAU,CAAEA,UAAW,CAAC,CAAC,EACvH,CAAC,CAEd"},"metadata":{},"sourceType":"module","externalDependencies":[]}